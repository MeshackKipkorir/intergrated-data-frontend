<template>
    <div class="page">
        <div class="navbar navbar-transparent">
            <div class="navbar-bg"></div>
            <div class="navbar-inner sliding">
                <div class="left">
                    <a class="link back">
                        <i class="icon icon-back"></i>
                    </a>
                </div>
                <div class="title">Tenders</div>
                <div class="right">
                    <a href="#" class="panel-open link" data-panel=".sidebar-right">
                        <ion-icon name="filter-outline"></ion-icon><span></span>
                    </a>
                </div>
            </div>
        </div>
        <div class="page-content">
            <!-- sidebar / panel for filter -->
            <div class="panel-backdrop"></div>
            <div class="panel panel-right sidebar-right panel-cover panel-init">
                <div class="block-title title-small">
                    <h3>Sort by</h3>
                </div>
                <form class="list">
                    <ul>
                        <li class="item-content item-input">
                            <div class="item-inner">
                                <div class="item-input-wrap input-dropdown-wrap">
                                    <select id="filter">
                                        <option value="">Entity</option>
                                        <option value="Commissions and Independent Offices">Commissions and Independent Offices</option>
                                        <option value="County">County</option>
                                        <option value="State Corporation">State Corporation</option>
                                        <option value="County Assemblies">County Assemblies</option>
                                        <option value="Public Universities">Public Universities</option>
                                        <option value="Semi-Autonomous Government Agencies">Semi-Autonomous Government Agencies</option>
                                        <option value="Ministry">Ministry</option>
            
                                        <!-- <option value="Price">Price: Low to high</option>
									<option value="Price">Price: High to low</option> -->
                                    </select>
                                </div>
                            </div>
                        </li>
                    </ul>
                </form>
                <!-- <div class="block-title title-small">
                    <h3>Ratings</h3>
                </div>
                <div class="rating-filter">
                    <div class="container">
                        <ul>
                            <li class="rating-active"><a href="">
                                    <ion-icon name="star-sharp"></ion-icon>5
                                </a></li>
                            <li><a href="">
                                    <ion-icon name="star-sharp"></ion-icon>4
                                </a></li>
                            <li><a href="">
                                    <ion-icon name="star-sharp"></ion-icon>3
                                </a></li>
                            <li><a href="">
                                    <ion-icon name="star-sharp"></ion-icon>2
                                </a></li>
                            <li><a href="">
                                    <ion-icon name="star-sharp"></ion-icon>1
                                </a></li>
                        </ul>
                    </div>
                </div> -->
                <div class="block-title title-small">
                    <h3>Location</h3>
                </div>
                <form class="list">
                    <ul>
                        <li class="item-content item-input">
                            <div class="item-inner">
                                <div class="item-input-wrap">
                                    <input type="text" placeholder="Current location">
                                    <span class="input-clear-button"></span>
                                </div>
                            </div>
                        </li>
                    </ul>
                </form>
                <!-- <div class="block-title title-small">
                    <h3>Price Range</h3>
                </div>
                <div class="container">
                    <form class="list">
                        <ul>
                            <li>
                                <div class="row">
                                    <div class="col-50">
                                        <div class="item-content item-input">
                                            <div class="item-inner">
                                                <div class="item-input-wrap">
                                                    <input type="text" placeholder="Minimum">
                                                    <span class="input-clear-button"></span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-50">
                                        <div class="item-content item-input">
                                            <div class="item-inner">
                                                <div class="item-input-wrap">
                                                    <input type="text" placeholder="Maximum">
                                                    <span class="input-clear-button"></span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </li>
                        </ul>
                    </form>
                </div> -->
                <!-- separator -->
                <div class="separator-large"></div>
                <!-- end separator -->
                <div class="fitler-execution">
                    <div class="container">
                        <button class="button secondary-button panel-close">Cancel</button>
                        <!-- separator -->
                        <div class="separator-medium"></div>
                        <!-- end separator -->
                        <a data-transition="f7-dive" class="button item-link item-content panel-close"  @click="applyFilter">Apply Filters</a>

                    </div>
                </div>
                <!-- separator -->
                <div class="separator-large"></div>
                <!-- end separator -->
            </div>
            <!-- end sidebar / panel for filter -->
            <!-- separator -->
            <div class="separator-extra-small"></div>
            <!-- end separator -->
            <!-- header searchbar -->
            <div class="header-searchbar">
                <form class="searchbar">
                    <div class="searchbar-inner">
                        <div class="searchbar-input-wrap">
                            <input type="search" placeholder="Find tenders, jobs & government news">
                            <i class="searchbar-icon"></i>
                            <span class="input-clear-button"></span>
                        </div>
                        <span class="searchbar-disable-button">Cancel</span>
                    </div>
                </form>
            </div>
            <!-- end header searchbar -->
            <!-- separator -->
            <div class="separator-small"></div>
            <!-- end separator -->
            <!-- all categories -->
            <div class="categories">
                <div class="container">

                    <!--
                    <div class="row">
                    	{{#each data.data}}
                        <div class="col-50">
                            <div class="content-item radius-default bg-white">
                                <a href="" data-transition="f7-dive">
                                    <div class="favorite-symbol">
                                        <ion-icon name="heart-outline"></ion-icon>
                                    </div>
                                </a>
                                <a href="/single-tender/{{this.id}}">
                                    <img class="full-width radius-top-only" src="images/tenders/download.jpeg" alt="">
                                    <div class="text-desc">
                                        <p class="title-item">{{this.tender_title}}</p>
                                        <p class="price-item">{{this.tender_code}}</p>
                                        <p class="location-item">
                                            <ion-icon name="map-outline"></ion-icon>{{this.org_name}}
                                        </p>
                                    </div>
                                </a>
                            </div>
                        </div>  
                        {{/each}}
                    </div>-->
                    <div class="row">
                        <div class="col-50">
                            <div class="content-item radius-default bg-white">
                                <a href="" data-transition="f7-dive">
                                    <div class="favorite-symbol" @click="addFavourite('SUPPLY , INSTALLATION, CONFIGURATION OF ANTIVIRUS')"><ion-icon name="heart-outline"></ion-icon></div>
                                </a>
                                <a href="/single-tender/1/IEBC.jpg">
                                    <img class="full-width radius-top-only" src="images/tenders/IEBC.png" alt="" height="100" width="100">
                                    <div class="text-desc">
                                        <p class="price-item">SUPPLY, INSTALLATION, CONFIGURATION OF ANTIVIRUS...</p>
                                        <p class="location-item"><ion-icon name="map-outline"></ion-icon>September 16 ,2020</p>
                                        <p class="title-item">Independent Electoral and Boundaries Commission</p>
                                    </div>
                                </a>
                            </div>
                        </div>
                      
                            <div class="col-50">
                            <div class="content-item radius-default bg-white">
                                <a href="" data-transition="f7-dive">
                                    <div class="favorite-symbol" @click="addFavourite('CONSTRUCTION OF NEW MAIN CANAL AND ASSOCIATED CIVIL WORKS')"><ion-icon name="heart-outline"></ion-icon></div>
                                </a>
                                <a href="/single-tender/25/NIB.png">
                                    <img class="full-width radius-top-only" src="images/tenders/NIB.png" alt="" height="100" width="100">
                                    <div class="text-desc">
                                        <p class="price-item">CONSTRUCTION OF NEW MAIN CANAL AND ASSOCIATED CIVIL WORKS</p>
                                        <p class="location-item"><ion-icon name="map-outline"></ion-icon>August 25 ,2020</p>
                                        <p class="title-item">National Irrigation Board</p>
                                    </div>
                                </a>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-50">
                            <div class="content-item radius-default bg-white">
                                <a href="" data-transition="f7-dive">
                                    <div class="favorite-symbol" @click="addFavourite('PROVISION OF DEDICATED INTERNET SERVOCE OF 200MBPS FOR 3 YEARS')"><ion-icon name="heart-outline"></ion-icon></div>
                                </a>
                                <a href="/single-tender/26/kcaa.jpeg">
                                    <img class="full-width radius-top-only" src="images/tenders/KCAA.png" alt="" height="150" width="150">
                                    <div class="text-desc">
                                        <p class="price-item">PROVISION OF DEDICATED INTERNET SERVOCE OF 200MBPS FOR 3 YEARS</p>
                                        <p class="location-item"><ion-icon name="map-outline"></ion-icon>September 8 ,2020</p>
                                        <p class="title-item">Kenya Civil Aviation Authority</p>
                                    </div>
                                </a>
                            </div>
                        </div>
                     
                            <div class="col-50">
                            <div class="content-item radius-default bg-white">
                                <a href="" data-transition="f7-dive">
                                    <div class="favorite-symbol" @click="addFavourite('TENDER FOR DISPOSAL OF USED MOTOR VEHICLES')"><ion-icon name="heart-outline"></ion-icon></div>
                                </a>
                                <a href="/single-tender/29/gdc.png">
                                    <img class="full-width radius-top-only" src="images/tenders/gdc.png" alt="" height="150" width="150">
                                    <div class="text-desc">
                                        <p class="price-item">TENDER FOR DISPOSAL OF USED MOTOR VEHICLES</p>
                                        <p class="location-item"><ion-icon name="map-outline"></ion-icon>August 25 ,2020</p>
                                        <p class="title-item">Geothermal Development Company</p>
                                    </div>
                                </a>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-50">
                            <div class="content-item radius-default bg-white">
                                <a href="" data-transition="f7-dive">
                                    <div class="favorite-symbol" @click="addFavourite('SUPPLY OF MALARIA RAPID DIAGNOSTIC TESTS')"><ion-icon name="heart-outline"></ion-icon></div>
                                </a>
                                <a href="/single-tender/31/kemsa.png">
                                    <img class="full-width radius-top-only" src="images/tenders/KEMSA.png" alt="" height="150" width="150">
                                    <div class="text-desc">
                                        <p class="price-item">SUPPLY OF MALARIA RAPID DIAGNOSTIC TESTS</p>
                                        <p class="location-item"><ion-icon name="map-outline"></ion-icon>September 09, 2020</p>
                                        <p class="title-item">Kenya Medical Supplies Authority</p>
                                    </div>
                                </a>
                            </div>
                        </div>
                       
                            <div class="col-50">
                            <div class="content-item radius-default bg-white">
                                <a href="" data-transition="f7-dive">
                                    <div class="favorite-symbol"><ion-icon name="heart-outline"></ion-icon></div>
                                </a>
                                <a href="/single-tender/33/NTSA.png">
                                    <img class="full-width radius-top-only" src="images/tenders/NTSA.png" alt="" height="150" width="150">
                                    <div class="text-desc">
                                        <p class="price-item">SUPPLY, DELIVERY AND INSTALLATION OF MICROSOFT LICENSES FOR WINDOWS, OFFICE AND MICROSOFT TEAMS</p>
                                        <p class="location-item"><ion-icon name="map-outline"></ion-icon>September 01 ,2020</p>
                                        <p class="title-item">National Transport and Safety Authority</p>
                                    </div>
                                </a>
                            </div>
                        </div>
                    </div>
                    
                <div class="row">
                    <div class="col-50">
                        <div class="content-item radius-default bg-white">
                            <a href="" data-transition="f7-dive">
                                <div class="favorite-symbol active-symbol"><ion-icon name="heart-outline"></ion-icon></div>
                            </a>
                            <a href="/single-tender/44/nmcl.jpeg">
                                <img class="full-width radius-top-only" src="images/tenders/NMC.png" alt="" height="150" width="150">
                                <div class="text-desc">
<!-- 									<p class="title-item">SENIOR ADMINISTRATIVE ASSISTANT </p>
 -->									<p class="price-item">TENDER FOR SUPPLY, INSTALLATION,TESTING, TRAINING AND COMMISSIONING OF 1 NO. POWDER COATING FACILITY</p>
                                    <p class="location-item"><ion-icon name="map-outline"></ion-icon>September, 01, 2020</p>
                                    <p class="title-item">Numerical Machining Complex Limited</p>
                                </div>
                            </a>
                        </div>
                    </div>    

                    <div class="col-50">
                        <div class="content-item radius-default bg-white">
                            <a href="" data-transition="f7-dive">
                                <div class="favorite-symbol active-symbol"><ion-icon name="heart-outline"></ion-icon></div>
                            </a>
                            <a href="/single-tender/27/nock.png">
                                <img class="full-width radius-top-only" src="images/tenders/national-oil.png" alt="" height="150" width="150">
                                <div class="text-desc">
<!-- 									<p class="title-item">SENIOR ADMINISTRATIVE ASSISTANT </p>
 -->									<p class="price-item">TENDER FOR SUPPLY. DELIVERY,INSTALLATION, COMMISSIONING, TESTING AND MAINTENANCE OF GEOCHEMICAL AND PETROPHYSICAL LABAROTY EQUIPMENT AT NOCK</p>
                                    <p class="location-item"><ion-icon name="map-outline"></ion-icon>September 24 ,2020</p>
                                    <p class="title-item">Comprehensive reforms include Sh62 billion debt waiver and plan to lease</p>
                                </div>
                            </a>
                        </div>
                    </div>

                </div>
            </div>
            <!-- end all categories -->
            <!-- separator -->
            <div class="separator-large"></div>
            <!-- end separator -->
        </div>
    </div>
</template>
<script>
// script must return component object
console.log('logged in as '+sessionStorage.getItem('user'));
return {
    data: function() {
        console.log(JSON.parse(featuredTender.response));
        return {
            data: JSON.parse(featuredTender.response),
        }
    },
    methods: {
    addFavourite: function (title,job_id) {
      var userEmail = sessionStorage.getItem('user');
      console.log(title);
      console.log(job_id);
      
      if(sessionStorage.getItem('user') != null){
      app.request.post('http://localhost:8000/api/insertTenderNotification?email='+userEmail+'&title='+title+'&tender_id=3'+'&closing_date=29-10-2020', function (data,response) {
		console.log(response);

		var obj = data; 
        // console.log(obj);
        // console.log(obj.success);

        if (response == 200) {
          console.log('fav added successfully');
          app.dialog.alert('Added to Your Tenders' , function () {});  
        } else {
			app.dialog.alert(obj.Message , function () {});

        }
      });
    }
    else{
        app.dialog.alert('please login!');
        app.views.main.router.navigate('/sign-in/');
    }
    },
    applyFilter:function(){
        app.preloader.show();

        var filter = $('#filter').val();
        console.log(filter);
        app.views.main.router.navigate('/filtered-tenders/'+filter+'/');   
    }
  },

    on: {
        pageInit: function(e, page) {
            console.log('');
        }
    }
}
</script>