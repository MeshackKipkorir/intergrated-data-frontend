<template>
    <div class="page">
	<div class="navbar navbar-transparent">
		<div class="navbar-bg"></div>
		<div class="navbar-inner sliding">
			<div class="left">
				<a class="link back">
					<i class="icon icon-back"></i>
				</a>
			</div>
			<div class="title">Sign Up</div>
		</div>
	</div>
	<div class="page-content">

		<!-- separator -->
		<div class="separator-large"></div>
		<!-- end separator -->

		<!-- sign up -->
		<div class="sign-up">
			<div class="content text-center">
				<img class="image-illustration" src="images/contact-illustration.png" alt="">
				<h3>Create Account</h3>
			</div>

			<!-- separator -->
			<div class="separator-large"></div>
			<!-- end separator -->

			<div class="content-form">
				<form class="list">
					<ul>
						<li class="item-content item-input">
							<div class="item-inner">
								<div class="item-input-wrap">
									<input type="text" placeholder="Name" id="username"> 
								</div>
							</div>
						</li>
						<li class="item-content item-input">
							<div class="item-inner">
								<div class="item-input-wrap">
									<input type="email" placeholder="Email" id="email">
								</div>
							</div>
						</li>
						<li class="item-content item-input">
							<div class="item-inner">
								<div class="item-input-wrap">
									<input type="password" placeholder="Password" id="password">
								</div>
							</div>
						</li>
						<li class="item-content item-input">
							<div class="item-inner">
								<div class="item-input-wrap">
									<input type="password" placeholder="Confirm Password" id="password_confirmation">
								</div>
							</div>
						</li>
					</ul>
					<div class="button-default">
						<div class="container">
							<button class="button" @click="signUp">Sign Up</button>
						</div>
					</div>
				</form>

			</div>
		</div>
		<!-- end sign up -->

		<!-- separator -->
		<div class="separator-large"></div>
		<!-- end separator -->

	</div>
</div>
</template>
<script>
	return {
	methods: {
		signUp: function () {
			 	
		event.preventDefault();			
		var $ = this.$;
		var app = this.$app;
		var username = $('input#username').val();
		var email = $('input#email').val();
		var password = $('input#password').val();
		var password_confirmation = $('input#password_confirmation').val();
		console.log(email + " " + username);
		console.log(password + " " + password_confirmation);

		app.request.post('http://localhost:8000/api/auth/login?email='+email+'&password='+password+'&password_confirmation='+password_confirmation+'name='+username, function (data,success) {
			console.log(data);

			var obj = data;
			// console.log(obj);
			// console.log(obj.success);

			if (success) {
			console.log('you are logged in ')
			app.views.main.router.navigate('/sign-in/');
				
			app.data.IsLogin=true;
			app.data.UserName=email;
			//   app.dialog.alert('logged in ' , function () {});
			//app.views.main.router.navigate('/sign-up');       
			} else {
				app.dialog.alert(obj.Message , function () {});

			}
		});
		}
	}
}
</script>

